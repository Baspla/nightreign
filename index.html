<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tims Nightreign Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer data-domain="baspla.github.io/nightreign" src="https://services.timmorgner.de/js/script.hash.tagged-events.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col items-center py-8 gap-4">
  <div>
  <h1 class="text-3xl font-bold text-center mb-1">Tims Nightreign Helper</h1>
  <h2 class="text-lg text-gray-400 text-center">https://baspla.github.io/nightreign/</h2>
  </div>
  <div class="bg-gray-800 rounded-xl shadow-lg p-8 w-full max-w-md flex flex-col items-center">
    <h1 class="text-2xl font-bold text-purple-300 mb-4">Nightreign Timer</h1>
    <div id="phase" class="text-xl text-white mb-2">Roundtable</div>
    <div id="time" class="text-4xl font-mono text-purple-200 mb-4">04:25</div>

    <!-- Progress Bar with 4 Segments -->
    <div class="relative w-full h-4 bg-gray-700 rounded mb-6 flex items-center">
      <!-- Dynamic Dividers -->
      <div id="phase-dividers" class="absolute top-0 left-0 w-full h-full pointer-events-none"></div>
      <!-- Progress Indicator -->
      <div id="progress-indicator" class="absolute top-0 h-4 bg-purple-400 rounded transition-all duration-300"
        style="width: 8px; left: 0"></div>
    </div>


    <!-- Control Buttons -->
    <div class="flex gap-2 mb-2">
      <button id="startBtn"
        class="bg-purple-500 hover:bg-purple-600 text-gray-900 font-bold py-2 px-6 rounded focus:outline-none transition plausible-event-name=Timer+Start">
        Start
      </button>
      <button id="resetBtn"
        class="bg-gray-600 hover:bg-gray-700 text-gray-200 font-bold py-2 px-4 rounded focus:outline-none transition plausible-event-name=Timer+Reset">
        Reset
      </button>
    </div>

    <!-- Phase Jump Buttons -->
    <div class="flex gap-2 mt-2">
      <button
        class="phase-jump bg-gray-700 hover:bg-purple-500 text-xs text-gray-300 px-2 py-1 rounded shadow focus:outline-none transition plausible-event-name=Timer+Button+1"
        data-phase="0">1</button>
      <button
        class="phase-jump bg-gray-700 hover:bg-purple-500 text-xs text-gray-300 px-2 py-1 rounded shadow focus:outline-none transition plausible-event-name=Timer+Button+2"
        data-phase="1">2</button>
      <button
        class="phase-jump bg-gray-700 hover:bg-purple-500 text-xs text-gray-300 px-2 py-1 rounded shadow focus:outline-none transition plausible-event-name=Timer+Button+3"
        data-phase="2">3</button>
      <button
        class="phase-jump bg-gray-700 hover:bg-purple-500 text-xs text-gray-300 px-2 py-1 rounded shadow focus:outline-none transition plausible-event-name=Timer+Button+4"
        data-phase="3">4</button>
    </div>
  </div>

  <details open class="w-full max-w-6xl plausible-event-name=Collapsible+Boss+Weaknesses">

    <summary class="cursor-pointer text-gray-300 hover:text-purple-400 transition mb-2">Boss Weaknesses</summary>
    <div class="overflow-x-auto">
      <table class="min-w-full rounded-lg overflow-hidden text-xs">
        <thead>
          <tr class="bg-gray-800 text-gray-200">
            <th class="px-2 py-2 border-b border-gray-700">Boss</th>
            <th class="px-2 py-2 border-b border-gray-700">Weakness</th>
            <th class="px-2 py-2 border-b border-gray-700">Dealt Damage</th>
            <th class="px-2 py-2 border-b border-gray-700">Standard</th>
            <th class="px-2 py-2 border-b border-gray-700">Slash</th>
            <th class="px-2 py-2 border-b border-gray-700">Strike</th>
            <th class="px-2 py-2 border-b border-gray-700">Pierce</th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="bleed.webp" alt="Bleed" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="frostbite.webp" alt="Frostbite" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="poison.webp" alt="Poison" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="rot.webp" alt="Scarlet Rot" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="sleep.webp" alt="Sleep" class="inline-block w-5 h-5 align-middle" /></th>
            <th class="px-2 py-2 border-b border-gray-700"><img src="frenzy.webp" alt="Madness" class="inline-block w-5 h-5 align-middle" /></th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Gladius</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+10%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-50%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+35%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Adel</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="poison.webp" alt="Poison" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /><img src="bleed.webp" alt="Bleed" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-50%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Gnoster (Motte)</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /><img src="poison.webp" alt="Poison" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+25%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+25%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-50%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+40%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Gnoster (Skorpion)</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="poison.webp" alt="Poison" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+35%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Maris</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="sleep.webp" alt="Sleep" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-50%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+40%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Libra</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="frenzy.webp" alt="Madness" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="frenzy.webp" alt="Madness" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+10%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+20%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+35%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Fulghor</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-30%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">154</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Caligo</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="frostbite.webp" alt="Frostbite" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+35%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-20%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">The Shape Of Night</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700"></td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+15%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">-10%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+10%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+20%</td>
            <td class="px-2 py-2 border-b border-gray-700">+0%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-green-500">+35%</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
            <td class="px-2 py-2 border-b border-gray-700 text-yellow-500">252</td>
            <td class="px-2 py-2 border-b border-gray-700 text-orange-500">541</td>
            <td class="px-2 py-2 border-b border-gray-700 text-red-500">Immune</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2">Heolstor</td>
            <td class="px-2 py-2 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /><img src="frostbite.webp" alt="Frostbite" class="inline-block w-5 h-5 align-middle" /><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /><img src="frenzy.webp" alt="Madness" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2">+0%</td>
            <td class="px-2 py-2 text-red-500">-10%</td>
            <td class="px-2 py-2 text-green-500">+10%</td>
            <td class="px-2 py-2 text-green-500">+15%</td>
            <td class="px-2 py-2">+0%</td>
            <td class="px-2 py-2">+0%</td>
            <td class="px-2 py-2 text-green-500">+20%</td>
            <td class="px-2 py-2 text-green-500">+20%</td>
            <td class="px-2 py-2 text-red-500">Immune</td>
            <td class="px-2 py-2 text-red-500">Immune</td>
            <td class="px-2 py-2 text-red-500">Immune</td>
            <td class="px-2 py-2 text-yellow-500">252</td>
            <td class="px-2 py-2 text-orange-500">541</td>
            <td class="px-2 py-2 text-red-500">Immune</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="text-gray-400 text-xs mt-4">Percent: Bonus/Reduction in damage. Higher numbers = More susceptible to
      status effects. "Dealing Damage" is the type of damage the Boss deals to you.
    </p>
  </details>

  <details class="w-full max-w-6xl plausible-event-name=Collapsible+Character+Stats">
    <summary class="cursor-pointer text-gray-300 hover:text-purple-400 transition mb-2">Character Stats</summary>
    <div class="overflow-x-auto">
      <table class="min-w-full rounded-lg overflow-hidden text-xs">
        <thead>
          <tr class="bg-gray-800 text-gray-200">
            <th class="px-2 py-2 border-b border-gray-700">Character</th>
            <th class="px-2 py-2 border-b border-gray-700">HP</th>
            <th class="px-2 py-2 border-b border-gray-700">FP</th>
            <th class="px-2 py-2 border-b border-gray-700">Stamina</th>
            <th class="px-2 py-2 border-b border-gray-700">Strength</th>
            <th class="px-2 py-2 border-b border-gray-700">Dexterity</th>
            <th class="px-2 py-2 border-b border-gray-700">Intelligence</th>
            <th class="px-2 py-2 border-b border-gray-700">Faith</th>
            <th class="px-2 py-2 border-b border-gray-700">Arcane</th>
            <th class="px-2 py-2 border-b border-gray-700">Special moveset</th>
            <th class="px-2 py-2 border-b border-gray-700">My recommended weapon classes</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Wylder</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700">Greatsword</td>
            <td class="px-2 py-2 border-b border-gray-700">Greatswords, Straight Swords, Flails, Colossal Weapons,
              Greataxes, Hammers</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Guardian</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700">Halberd</td>
            <td class="px-2 py-2 border-b border-gray-700">Halberds, Axes, Great Spears, Thrusting Swords</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Duchess</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700">Dagger</td>
            <td class="px-2 py-2 border-b border-gray-700">Daggers, Katanas (Two-handed), Fist Weapons,  Claws, Short Swords, Twinblades, Staves</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Recluse</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700">None</td>
            <td class="px-2 py-2 border-b border-gray-700">Staves, Seals, Swords</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Ironeye</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700">Bow</td>
            <td class="px-2 py-2 border-b border-gray-700">Bows, Katanas, Thrusting Swords, Daggers</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">Raider</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">A</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700">Greataxe</td>
            <td class="px-2 py-2 border-b border-gray-700">Colossal Weapons, Greataxes, Great Hammers, Greatswords,
              Halberds</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">Executor</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-green-400">B</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">C</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-gray-400">D</td>
            <td class="px-2 py-2 border-b border-gray-700 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 border-b border-gray-700">Katana</td>
            <td class="px-2 py-2 border-b border-gray-700">Katanas, Daggers, Thrusting Swords, Bows</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2">Revenant</td>
            <td class="px-2 py-2 text-center text-gray-400">D</td>
            <td class="px-2 py-2 text-center text-green-400">A</td>
            <td class="px-2 py-2 text-center text-gray-400">D</td>
            <td class="px-2 py-2 text-center text-gray-400">C</td>
            <td class="px-2 py-2 text-center text-gray-400">C</td>
            <td class="px-2 py-2 text-center text-green-400">B</td>
            <td class="px-2 py-2 text-center text-yellow-400">S</td>
            <td class="px-2 py-2 text-center text-green-400">B</td>
            <td class="px-2 py-2">None</td>
            <td class="px-2 py-2">Seals, Swords, Fist Weapons</td>
          </tr>
        </tbody>

      </table>

    </div>
  </details>

  <details class="w-full max-w-6xl plausible-event-name=Collapsible+Magic+Cocktail">
    <summary class="cursor-pointer text-gray-300 hover:text-purple-400 transition mb-2">Magic Cocktail</summary>
    <div class="overflow-x-auto">
      <table class="min-w-full rounded-lg overflow-hidden text-xs">
        <thead>
          <tr class="bg-gray-800 text-gray-200">
            <th colspan="6" class="px-2 py-2 border-b border-gray-700 text-center">Elements</th>
            <th class="px-2 py-2 border-b border-gray-700">Name</th>
            <th class="px-2 py-2 border-b border-gray-700">Effect</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-gray-700">
            <td colspan="6" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Pure Magic</td>
            <td class="px-2 py-2 border-b border-gray-700">Summons a tracking wisp that detonates on
              contact, dealing periodic magic damage</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="6" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Pure Fire</td>
            <td class="px-2 py-2 border-b border-gray-700">Creates a whirlwind of flame; AoE fire damage
              that burns for some time</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="6" class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Pure Lightning</td>
            <td class="px-2 py-2 border-b border-gray-700">Bloodhound’s Step: greatly enhances dodging
              actions with lightning</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="6" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Pure Holy</td>
            <td class="px-2 py-2 border-b border-gray-700">Divine Shield: increases poise and damage
              negation (defensive buff)</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Magic/Fire</td>
            <td class="px-2 py-2 border-b border-gray-700">Summons a wraith flame that pursues and explodes
              on enemies</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Magic/Lightning</td>
            <td class="px-2 py-2 border-b border-gray-700">Carian Slash: broad forward slash with a magical
              blade</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Magic/Holy</td>
            <td class="px-2 py-2 border-b border-gray-700">Grants infinite FP for a short time (magic veil
              for self and allies)</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Fire/Lightning</td>
            <td class="px-2 py-2 border-b border-gray-700">Become a fireball, barrel forward, raining
              lightning on foes</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Fire/Holy</td>
            <td class="px-2 py-2 border-b border-gray-700">Warming Stone: raises max HP and reduces status
              buildup for allies, lowers enemy max HP</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="3" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">Lightning/Holy</td>
            <td class="px-2 py-2 border-b border-gray-700">Automatic Parry: layer of lightning parries enemy
              attacks for a short time</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">No Holy</td>
            <td class="px-2 py-2 border-b border-gray-700">AoE gravity orb pulls in enemies, then explodes
              for heavy damage</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">No Lightning</td>
            <td class="px-2 py-2 border-b border-gray-700">Mixed affinity breath: damages enemies, restores
              HP and FP to allies</td>
          </tr>
          <tr class="bg-gray-700">
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="fire.webp" alt="Fire" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2"class="px-2 py-2 border-b border-gray-700 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 border-b border-gray-700 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2 border-b border-gray-700">No Magic</td>
            <td class="px-2 py-2 border-b border-gray-700">Creates a lightning rod; white lightning strikes
              after a delay (AoE lightning)</td>
          </tr>
          <tr class="bg-gray-800">
            <td colspan="2" class="px-2 py-2 text-center"><img src="magic.webp" alt="Magic" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 text-center"><img src="lightning.webp" alt="Lightning" class="inline-block w-5 h-5 align-middle" /></td>
            <td colspan="2" class="px-2 py-2 text-center"><img src="holy.webp" alt="Holy" class="inline-block w-5 h-5 align-middle" /></td>
            <td class="px-2 py-2">No Fire</td>
            <td class="px-2 py-2">AoE cold storm, user retreats in ice block and
              becomes invulnerable</td>
          </tr>
        </tbody>
      </table>
    </div>
  </details>

  <details class="w-full max-w-6xl plausible-event-name=Collapsible+Level+Rune+Requirements">
    <summary class="cursor-pointer text-gray-300 hover:text-purple-400 transition mb-2">Level Rune Requirements</summary>
    <div class="overflow-x-auto">
      <table class="min-w-full rounded-lg overflow-hidden text-xs">
        <thead>
          <tr class="bg-gray-800 text-gray-200">
            <th class="px-2 py-2 border-b border-gray-700">Level</th>
            <th class="px-2 py-2 border-b border-gray-700">Runes required</th>
            </tr>
        </thead>
        <tbody>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">1</td>
            <td class="px-2 py-2 border-b border-gray-700">0</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">2</td>
            <td class="px-2 py-2 border-b border-gray-700">3,698</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">3</td>
            <td class="px-2 py-2 border-b border-gray-700">7,922</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">4</td>
            <td class="px-2 py-2 border-b border-gray-700">12,348</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">5</td>
            <td class="px-2 py-2 border-b border-gray-700">16,978</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">6</td>
            <td class="px-2 py-2 border-b border-gray-700">21,818</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">7</td>
            <td class="px-2 py-2 border-b border-gray-700">26,869</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">8</td>
            <td class="px-2 py-2 border-b border-gray-700">32,137</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">9</td>
            <td class="px-2 py-2 border-b border-gray-700">37,624</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">10</td>
            <td class="px-2 py-2 border-b border-gray-700">43,335</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">11</td>
            <td class="px-2 py-2 border-b border-gray-700">49,271</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">12</td>
            <td class="px-2 py-2 border-b border-gray-700">55,439</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">13</td>
            <td class="px-2 py-2 border-b border-gray-700">61,840</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">14</td>
            <td class="px-2 py-2 border-b border-gray-700">68,479</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2">15</td>
            <td class="px-2 py-2">75,358</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="text-gray-400 text-xs mt-4">Total runes required to reach level 15: 513,116</p>
  </details>

  <details class="w-full max-w-6xl plausible-event-name=Collapsible+Libra+Deals">
    <summary class="cursor-pointer text-gray-300 hover:text-purple-400 transition mb-2">Libra Deals</summary>
    <div class="overflow-x-auto">
      <table class="min-w-full rounded-lg overflow-hidden text-xs">
        <thead>
          <tr class="bg-gray-800 text-gray-200">
            <th class="px-2 py-2 border-b border-gray-700">Deal</th>
            <th class="px-2 py-2 border-b border-gray-700">Effect</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">I want more runes.</td>
            <td class="px-2 py-2 border-b border-gray-700">Grants Nightfarers the Symbol of Avarice Talisman, which lets
              them gain more runes but lose HP.</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">I desire a flask.</td>
            <td class="px-2 py-2 border-b border-gray-700">Grants one restoration flask charge at the cost of taking
              away a portion of your maximum HP.</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">I want the power of a demon.</td>
            <td class="px-2 py-2 border-b border-gray-700">Grants bonuses at random intervals in combat, but builds up
              Madness.</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">I want to hold death at bay.</td>
            <td class="px-2 py-2 border-b border-gray-700">When HP is low, restores all HP at the cost of reducing
              maximum HP.</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">I wish for eventual greatness.</td>
            <td class="px-2 py-2 border-b border-gray-700">Halves Max HP, FP, and Stamina until the end of the day, then they are increased.</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">I wish to expand my intellect.</td>
            <td class="px-2 py-2 border-b border-gray-700">Increases Intelligence at the cost of other stats.</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">I wish to have great dexterity.</td>
            <td class="px-2 py-2 border-b border-gray-700">Increases Dexterity at the cost of other stats.</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">I wish to have great strength.</td>
            <td class="px-2 py-2 border-b border-gray-700">Increases Strength at the cost of other stats.</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2 border-b border-gray-700">I wish to have deep faith.</td>
            <td class="px-2 py-2 border-b border-gray-700">Increases Faith at the cost of other stats.</td>
          </tr>
          <tr class="bg-gray-800">
            <td class="px-2 py-2 border-b border-gray-700">I desire a powerful weapon.</td>
            <td class="px-2 py-2 border-b border-gray-700">Gives the Nightfarer an Epic-tier weapon at the cost of 2
              levels.</td>
          </tr>
          <tr class="bg-gray-700">
            <td class="px-2 py-2">I want to gain many levels.</td>
            <td class="px-2 py-2">Gain levels but lose a level each time you use a flask.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </details>


  <p class="text-gray-400 text-xs mt-4">This site is for my personal use and is not affiliated with any game or
    company.
    All characters, names, and related items are copyrighted by their respective owners. I can't guarantee the
    accuracy
    of any of the data.</p>
  </p>


  <script>
    // Phase definitions in seconds
    const phases = [
      { name: "Storm 1 Phase", duration: 4 * 60 + 25 },
      { name: "Storm is shrinking", duration: 2 * 60 + 55 },
      { name: "Strom 2 Phase", duration: 3 * 60 + 25 },
      { name: "Storm is shrinking further", duration: 2 * 60 + 55 },
    ];
    const bossFightName = "Boss Fight";
    const totalDuration = phases.reduce((sum, p) => sum + p.duration, 0);

    let currentPhase = 0;
    let phaseTimeLeft = phases[0].duration;
    let elapsed = 0;
    let timer = null;
    let running = false;

    const phaseDiv = document.getElementById('phase');
    const timeDiv = document.getElementById('time');
    const progressIndicator = document.getElementById('progress-indicator');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const phaseJumpBtns = document.querySelectorAll('.phase-jump');

    function formatTime(sec) {
      const m = Math.floor(sec / 60).toString().padStart(2, '0');
      const s = (sec % 60).toString().padStart(2, '0');
      return `${m}:${s}`;
    }

    function getPhaseStartElapsed(phaseIdx) {
      let sum = 0;
      for (let i = 0; i < phaseIdx; ++i) sum += phases[i].duration;
      return sum;
    }

    function updateDisplay() {
      if (currentPhase < phases.length) {
        phaseDiv.textContent = phases[currentPhase].name;
        timeDiv.textContent = formatTime(phaseTimeLeft);
      } else {
        phaseDiv.textContent = bossFightName;
        timeDiv.textContent = "--:--";
      }
      // Indicator position: not filled, just a bar showing current progress
      const progress = Math.min(elapsed / totalDuration, 1);
      const barWidth = progressIndicator.parentElement.offsetWidth;
      // Center the indicator bar (12px wide)
      const indicatorWidth = 12;
      progressIndicator.style.left = `calc(${progress * 100}% - ${indicatorWidth / 2}px)`;
    }

    function nextPhase() {
      currentPhase++;
      if (currentPhase < phases.length) {
        phaseTimeLeft = phases[currentPhase].duration;
      } else {
        phaseTimeLeft = 0;
      }
    }

    function resetTimer() {
      clearTimeout(timer);
      running = false;
      currentPhase = 0;
      phaseTimeLeft = phases[0].duration;
      elapsed = 0;
      startBtn.textContent = "Start";
      updateDisplay();
    }

    function tick() {
      if (currentPhase < phases.length) {
        if (phaseTimeLeft > 0) {
          phaseTimeLeft--;
          elapsed++;
        } else {
          nextPhase();
        }
        updateDisplay();
        if (currentPhase < phases.length) {
          timer = setTimeout(tick, 1000);
        } else {
          // Boss Fight reached, allow restart
          running = false;
          startBtn.textContent = "Start";
          updateDisplay();
        }
      }
    }

    startBtn.addEventListener('click', () => {
      if (running) return;
      if (currentPhase >= phases.length) {
        resetTimer();
      }
      running = true;
      startBtn.textContent = "GL HF";
      tick();
    });

    resetBtn.addEventListener('click', () => {
      resetTimer();
    });

    phaseJumpBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const phaseIdx = parseInt(btn.getAttribute('data-phase'));
        clearTimeout(timer);
        running = false;
        currentPhase = phaseIdx;
        phaseTimeLeft = phases[phaseIdx].duration;
        elapsed = getPhaseStartElapsed(phaseIdx);
        startBtn.textContent = "Start";
        updateDisplay();
      });
    });

    const phaseDividers = document.getElementById('phase-dividers');

    // Calculate cumulative phase percentages
    function updateDividers() {
      phaseDividers.innerHTML = '';
      let cumDuration = 0;
      for (let i = 0; i < phases.length - 1; i++) {
        cumDuration += phases[i].duration;
        const percent = (cumDuration / totalDuration) * 100;
        const divider = document.createElement('div');
        divider.className = 'absolute top-0 h-full border-l border-gray-500';
        divider.style.left = `calc(${percent}% - 1px)`; // -1px to center the 2px border
        phaseDividers.appendChild(divider);
      }
    }

    // Call this after DOM is ready and on resize
    updateDividers();
    window.addEventListener('resize', updateDividers);


    // Initial display
    updateDisplay();

    // Responsive: update indicator on resize
    window.addEventListener('resize', updateDisplay);
  </script>

</body>

</html>